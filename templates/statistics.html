<!doctype html>
<html>
  <head>
    <title>DMR Analysis Statistics</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body>
    <div class="container-fluid mt-4">
      <!-- Navigation -->
      <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a href="{{ url_for('index_route') }}">Home</a>
          </li>
          <li class="breadcrumb-item active">Statistics</li>
        </ol>
      </nav>

      <!-- Top Statistics Section -->
      <div class="card mb-4">
        <div class="card-header">
          <h3>Overall Statistics</h3>
        </div>
        <div class="card-body">
          <div class="row">
            <!-- Coverage Statistics -->
            <div class="col-md-4">
              <h4>Coverage</h4>
              <table class="table table-sm">
                <tbody>
                  <tr>
                    <td>DMR Coverage:</td>
                    <td>
                      {{ statistics.coverage.dmrs.covered }}/{{
                      statistics.coverage.dmrs.total }} ({{
                      "%.1f"|format(statistics.coverage.dmrs.percentage * 100)
                      }}%)
                    </td>
                  </tr>
                  <tr>
                    <td>Gene Coverage:</td>
                    <td>
                      {{ statistics.coverage.genes.covered }}/{{
                      statistics.coverage.genes.total }} ({{
                      "%.1f"|format(statistics.coverage.genes.percentage * 100)
                      }}%)
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- Edge Coverage -->
            <div class="col-md-4">
              <h4>Edge Coverage</h4>
              <table class="table table-sm">
                <tbody>
                  <tr>
                    <td>Single Coverage:</td>
                    <td>
                      {{ statistics.edge_coverage.single_coverage }} ({{
                      "%.1f"|format(statistics.edge_coverage.single_percentage *
                      100) }}%)
                    </td>
                  </tr>
                  <tr>
                    <td>Multiple Coverage:</td>
                    <td>
                      {{ statistics.edge_coverage.multiple_coverage }} ({{
                      "%.1f"|format(statistics.edge_coverage.multiple_percentage
                      * 100) }}%)
                    </td>
                  </tr>
                  <tr>
                    <td>Uncovered:</td>
                    <td>
                      {{ statistics.edge_coverage.uncovered }} ({{
                      "%.1f"|format(statistics.edge_coverage.uncovered_percentage
                      * 100) }}%)
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- Dominating Set -->
            <div class="col-md-4">
              <h4>Dominating Set</h4>
              <table class="table table-sm">
                <tbody>
                  <tr>
                    <td>Size:</td>
                    <td>{{ statistics.dominating_set.size }}</td>
                  </tr>
                  <tr>
                    <td>Coverage:</td>
                    <td>
                      {{ "%.1f"|format(statistics.dominating_set.percentage *
                      100) }}%
                    </td>
                  </tr>
                  <tr>
                    <td>Genes Dominated:</td>
                    <td>{{ statistics.dominating_set.genes_dominated }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content - Split View -->
      <div class="row">
        <!-- Original Graph Statistics -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h3>Original Graph Components</h3>
            </div>
            <div class="card-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Total</th>
                    <th>Single Node</th>
                    <th>Small</th>
                    <th>Interesting</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Connected</td>
                    <td>
                      {{ statistics.components.original.connected.total }}
                    </td>
                    <td>
                      {{ statistics.components.original.connected.single_node }}
                    </td>
                    <td>
                      {{ statistics.components.original.connected.small }}
                    </td>
                    <td>
                      {{ statistics.components.original.connected.interesting }}
                    </td>
                  </tr>
                  <tr>
                    <td>Biconnected</td>
                    <td>
                      {{ statistics.components.original.biconnected.total }}
                    </td>
                    <td>
                      {{ statistics.components.original.biconnected.single_node
                      }}
                    </td>
                    <td>
                      {{ statistics.components.original.biconnected.small }}
                    </td>
                    <td>
                      {{ statistics.components.original.biconnected.interesting
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Biclique Graph Statistics -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h3>Biclique Graph Components</h3>
            </div>
            <div class="card-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Total</th>
                    <th>Single Node</th>
                    <th>Small</th>
                    <th>Interesting</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Connected</td>
                    <td>
                      {{ statistics.components.biclique.connected.total }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.connected.single_node }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.connected.small }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.connected.interesting }}
                    </td>
                  </tr>
                  <tr>
                    <td>Biconnected</td>
                    <td>
                      {{ statistics.components.biclique.biconnected.total }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.biconnected.single_node
                      }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.biconnected.small }}
                    </td>
                    <td>
                      {{ statistics.components.biclique.biconnected.interesting
                      }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Components Table -->
      <div class="card mt-4">
        <div class="card-header">
          <h3>Interesting Components</h3>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Component ID</th>
                  <th>DMRs</th>
                  <th>Genes</th>
                  <th>Split Genes</th>
                  <th>Total Bicliques</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% for component in bicliques_result.interesting_components %}
                <tr>
                  <td>{{ component.id }}</td>
                  <td>{{ component.dmrs }}</td>
                  <td>{{ component.total_genes }}</td>
                  <td>{{ component.split_genes|length }}</td>
                  <td>{{ component.raw_bicliques|length }}</td>
                  <td>
                    <a
                      href="{{ url_for('component_detail', component_id=component.id) }}"
                      class="btn btn-primary btn-sm"
                    >
                      View Graph
                    </a>
                  </td>
                </tr>
                {% endfor %}
                <!doctype html>
                <html>
                  <head>
                    <title>DMR Analysis Statistics</title>
                    <link
                      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
                      rel="stylesheet"
                    />
                    <link
                      rel="stylesheet"
                      href="{{ url_for('static', filename='css/styles.css') }}"
                    />
                    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
                  </head>
                  <body>
                    <div class="container-fluid mt-4">
                      <!-- Navigation -->
                      <nav aria-label="breadcrumb" class="mb-4">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item">
                            <a href="{{ url_for('index_route') }}">Home</a>
                          </li>
                          <li class="breadcrumb-item active">Statistics</li>
                        </ol>
                      </nav>

                      <!-- Top Statistics Section -->
                      <div class="card mb-4">
                        <div class="card-header">
                          <h3>Overall Statistics</h3>
                        </div>
                        <div class="card-body">
                          <div class="row">
                            <!-- Coverage Statistics -->
                            <div class="col-md-4">
                              <h4>Coverage</h4>
                              <table class="table table-sm">
                                <tbody>
                                  <tr>
                                    <td>DMR Coverage:</td>
                                    <td>
                                      {{ statistics.coverage.dmrs.covered }}/{{
                                      statistics.coverage.dmrs.total }} ({{
                                      "%.1f"|format(statistics.coverage.dmrs.percentage
                                      * 100) }}%)
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Gene Coverage:</td>
                                    <td>
                                      {{ statistics.coverage.genes.covered }}/{{
                                      statistics.coverage.genes.total }} ({{
                                      "%.1f"|format(statistics.coverage.genes.percentage
                                      * 100) }}%)
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <!-- Edge Coverage -->
                            <div class="col-md-4">
                              <h4>Edge Coverage</h4>
                              <table class="table table-sm">
                                <tbody>
                                  <tr>
                                    <td>Single Coverage:</td>
                                    <td>
                                      {{
                                      statistics.edge_coverage.single_coverage
                                      }} ({{
                                      "%.1f"|format(statistics.edge_coverage.single_percentage
                                      * 100) }}%)
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Multiple Coverage:</td>
                                    <td>
                                      {{
                                      statistics.edge_coverage.multiple_coverage
                                      }} ({{
                                      "%.1f"|format(statistics.edge_coverage.multiple_percentage
                                      * 100) }}%)
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Uncovered:</td>
                                    <td>
                                      {{ statistics.edge_coverage.uncovered }}
                                      ({{
                                      "%.1f"|format(statistics.edge_coverage.uncovered_percentage
                                      * 100) }}%)
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <!-- Dominating Set -->
                            <div class="col-md-4">
                              <h4>Dominating Set</h4>
                              <table class="table table-sm">
                                <tbody>
                                  <tr>
                                    <td>Size:</td>
                                    <td>
                                      {{ statistics.dominating_set.size }}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Coverage:</td>
                                    <td>
                                      {{
                                      "%.1f"|format(statistics.dominating_set.percentage
                                      * 100) }}%
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Genes Dominated:</td>
                                    <td>
                                      {{
                                      statistics.dominating_set.genes_dominated
                                      }}
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Main Content - Split View -->
                      <div class="row">
                        <!-- Original Graph Statistics -->
                        <div class="col-md-6">
                          <div class="card">
                            <div class="card-header">
                              <h3>Original Graph Components</h3>
                            </div>
                            <div class="card-body">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th>Type</th>
                                    <th>Total</th>
                                    <th>Single Node</th>
                                    <th>Small</th>
                                    <th>Interesting</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td>Connected</td>
                                    <td>
                                      {{
                                      statistics.components.original.connected.total
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.connected.single_node
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.connected.small
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.connected.interesting
                                      }}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Biconnected</td>
                                    <td>
                                      {{
                                      statistics.components.original.biconnected.total
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.biconnected.single_node
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.biconnected.small
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.original.biconnected.interesting
                                      }}
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                        <!-- Biclique Graph Statistics -->
                        <div class="col-md-6">
                          <div class="card">
                            <div class="card-header">
                              <h3>Biclique Graph Components</h3>
                            </div>
                            <div class="card-body">
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th>Type</th>
                                    <th>Total</th>
                                    <th>Single Node</th>
                                    <th>Small</th>
                                    <th>Interesting</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td>Connected</td>
                                    <td>
                                      {{
                                      statistics.components.biclique.connected.total
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.connected.single_node
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.connected.small
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.connected.interesting
                                      }}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>Biconnected</td>
                                    <td>
                                      {{
                                      statistics.components.biclique.biconnected.total
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.biconnected.single_node
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.biconnected.small
                                      }}
                                    </td>
                                    <td>
                                      {{
                                      statistics.components.biclique.biconnected.interesting
                                      }}
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Components Table -->
                      <div class="card mt-4">
                        <div class="card-header">
                          <h3>Interesting Components</h3>
                        </div>
                        <div class="card-body">
                          <div class="table-responsive">
                            <table class="table">
                              <thead>
                                <tr>
                                  <th>Component ID</th>
                                  <th>DMRs</th>
                                  <th>Genes</th>
                                  <th>Split Genes</th>
                                  <th>Total Bicliques</th>
                                  <th>Action</th>
                                </tr>
                              </thead>
                              <tbody>
                                {% for component in
                                bicliques_result.interesting_components %}
                                <tr>
                                  <td>{{ component.id }}</td>
                                  <td>{{ component.dmrs }}</td>
                                  <td>{{ component.total_genes }}</td>
                                  <td>{{ component.split_genes|length }}</td>
                                  <td>{{ component.raw_bicliques|length }}</td>
                                  <td>
                                    <a
                                      href="{{ url_for('component_detail', component_id=component.id) }}"
                                      class="btn btn-primary btn-sm"
                                    >
                                      View Graph
                                    </a>
                                  </td>
                                </tr>
                                {% endfor %}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>

                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
                  </body>
                </html>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
