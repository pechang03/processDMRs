{% extends "layouts/base.html" %}

{% block title %}DMR Analysis Statistics{% endblock %}

{% block content %}
  <div class="card mb-4">
    <div class="card-header">
      <h3>Overall Statistics</h3>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-4">
          <h4>Total Metrics</h4>
          <table class="table table-sm">
            <tbody>
              <tr>
                <td>Total DMRs:</td>
                <td>{{ statistics.total_dmrs }}</td>
              </tr>
              <tr>
                <td>Total Genes:</td>
                <td>{{ statistics.total_genes }}</td>
              </tr>
              <tr>
                <td>Total Edges:</td>
                <td>{{ statistics.total_edges }}</td>
              </tr>
              <tr>
                <td>Timepoints:</td>
                <td>{{ statistics.timepoint_count }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        {% include 'components/stats/coverage.html' %}
        {% include 'components/stats/edge_coverage.html' %}
      </div>
    </div>
  </div>

  <div class="card mb-4">
    <div class="card-header">
      {% include 'components/stats/timepoint_tabs.html' %}
    </div>
    <div class="card-body">
      <div class="tab-content">
        <!-- Overall Statistics Tab -->
        <div class="tab-pane fade show active" id="overall" role="tabpanel">
          {% include 'components/graph_components.html' %}
        </div>

        <!-- Timepoint-specific tabs -->
        {% for timepoint, data in timepoint_info.items() %}
          {% include 'components/stats/timepoint_tab.html' %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
